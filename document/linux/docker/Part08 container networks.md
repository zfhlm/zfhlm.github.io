
# docker container networks

    共享容器网络，容器启动时加上 --net=container:<NAME> 参数，<NAME>为另一个运行中的容器名称

    容器共享另一个容器的网卡，网络状况决定于另一个容器启用的网络模式

#### 宿主机网络

    宿主机查看本机网络，输入命令：

        ip addr

        ->
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |  interface      |      ipv4          |       brd       |       mac         |      scope     |    master   |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |    ens33        | 192.168.140.201/24 | 192.168.140.255 | 00:0c:29:92:0a:f0 |      global    |             |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |   docker0       |   172.17.0.1/16    | 172.17.255.255  | 02:42:8c:5b:ba:0a |      global    |             |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+

    可以看到宿主机有两个网卡，一个安装虚拟机自带的网卡 ens33，另一个安装 docker 自动配置的网卡 docker0

#### 容器网络

    运行一个使用 bridge 网络的 centos 容器，输入命令：

        docker pull centos

        docker run -it -d --name centos1 centos /usr/sbin/init

        docker ps

    运行一个使用 container 网络的 centos 容器，输入命令：

        docker run -it -d --net=container:centos1 --name centos2 centos /usr/sbin/init

        docker ps

    查看 centos 容器网络，输入命令：

        docker exec -it centos1 ip addr

        ->
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |  interface      |      ipv4          |       brd       |       mac         |      scope     |    master   |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |   eth0@if14     |    172.17.0.2/16   |  172.17.255.255 | 02:42:ac:11:00:02 |      global    |             |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+

        docker exec -it centos2 ip addr

        ->
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |  interface      |      ipv4          |       brd       |       mac         |      scope     |    master   |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |   eth0@if14     |    172.17.0.2/16   |  172.17.255.255 | 02:42:ac:11:00:02 |      global    |             |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+

    查看宿主机网络，输入命令：

        ip addr

        ->
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |  interface      |      ipv4          |       brd       |       mac         |      scope     |    master   |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |    ens33        | 192.168.140.201/24 | 192.168.140.255 | 00:0c:29:92:0a:f0 |      global    |             |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |   docker0       |   172.17.0.1/16    | 172.17.255.255  | 02:42:8c:5b:ba:0a |      global    |             |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+
        |vetha447bd8@if13 |                    |                 | 0e:a0:01:a8:ac:d2 |       link     |             |
        +-----------------+--------------------+-----------------+-------------------+----------------+-------------+

    可以看到 centos2 容器共享了 centos1 容器网络

#### 容器ping

    与共享容器的网络模式对应，这里不做测试
